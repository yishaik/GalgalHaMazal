<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>גלגל המזל – סימולטור</title>
  <link rel="manifest" href="assets/manifest.json" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/new-style.css" />
  <style>
    body { font-family: 'Assistant','Segoe UI',Tahoma,Geneva,Verdana,sans-serif }
    .container { max-width: 1100px }
    canvas { touch-action: none }
  </style>
</head>
<body class="bg-gray-900 text-white">
  <header class="site-header">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a class="text-2xl font-bold text-yellow-400" href="index.html">גלגל המזל</a>
      <button id="navToggle" class="md:hidden inline-flex items-center justify-center p-2 rounded border border-gray-600 text-gray-400 hover:bg-gray-800" aria-label="פתח תפריט" aria-expanded="false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
      <nav id="siteNav" class="hidden md:flex flex-col md:flex-row md:items-center gap-4 md:gap-8 text-lg">
        <a class="text-gray-300 hover:text-yellow-400" href="index.html">בית</a>
        <a class="text-gray-300 hover:text-yellow-400" href="overview.html">סקירה</a>
        <a class="text-gray-300 hover:text-yellow-400" href="architecture.html">תרשים מערכת</a>
        <a class="text-gray-300 hover:text-yellow-400" href="wiring.html">תרשים חיווט</a>
        <a class="text-gray-300 hover:text-yellow-400" href="bom.html">רשימת חלקים</a>
        <a class="text-gray-300 hover:text-yellow-400" href="gallery.html">גלריה</a>
        <a class="text-gray-300 hover:text-yellow-400" href="docs.html">מסמכים</a>
        <a class="text-gray-300 hover:text-yellow-400" href="missing.html">מה חסר?</a>
        <a class="text-yellow-400 font-semibold" href="simulator.html">סימולטור</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8 space-y-8">
    <section class="grid lg:grid-cols-2 gap-8">
      <div class="bg-gray-800 rounded-xl shadow-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-semibold text-yellow-400">🎡 טבעת LED (גלגל)</h2>
          <span class="text-sm text-gray-400">מקטעים: <span id="ringSegmentsLabel">160</span></span>
        </div>
        <div class="aspect-square w-full bg-gray-900 rounded-lg relative overflow-hidden">
          <canvas id="ringCanvas" class="absolute inset-0 w-full h-full"></canvas>
          <div class="absolute left-3 top-3 bg-gray-800/80 rounded px-3 py-1 text-sm text-gray-300">
            זוית: <span id="angleReadout">0</span>° · חיישן A: <span id="hallA">0</span> · B: <span id="hallB">0</span>
          </div>
        </div>
      </div>

      <div class="bg-gray-800 rounded-xl shadow-lg p-6">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-semibold text-yellow-400">🟩 מטריצת LED 32×32</h2>
          <span class="text-sm text-gray-400">קצב: <span id="fps">0</span> FPS</span>
        </div>
        <div class="aspect-square w-full bg-gray-900 rounded-lg relative overflow-hidden">
          <canvas id="matrixCanvas" class="absolute inset-0 w-full h-full"></canvas>
        </div>
      </div>
    </section>

    <section class="bg-gray-800 rounded-xl shadow-lg p-6">
      <h3 class="text-2xl font-semibold mb-6 text-yellow-400">ממשק שליטה</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
        <div class="space-y-4">
          <div>
            <label class="block text-lg mb-2">בהירות כללית <span id="brightnessLabel" class="text-gray-400"></span></label>
            <input id="brightness" type="range" min="5" max="100" value="80" class="w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer" />
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">מהירות <span id="speedLabel" class="text-gray-400"></span></label>
            <input id="speed" type="range" min="0" max="200" value="60" class="w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer" />
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">מספר נורות <span id="segmentsSliderLabel" class="text-gray-400"></span></label>
            <input id="segments" type="range" min="60" max="240" step="10" value="160" class="w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer" />
            <p class="text-sm text-gray-500 mt-2">כוונון התצורה מאפשר הדמיית גלגלים בגדלים שונים.</p>
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">חלוקת מקטעים <span id="segmentSizeLabel" class="text-gray-400"></span></label>
            <input id="segmentSize" type="range" min="4" max="40" step="1" value="16" class="w-full h-3 bg-gray-700 rounded-lg appearance-none cursor-pointer" />
            <div class="flex items-center gap-3 mt-3">
              <input id="showSegments" type="checkbox" class="w-5 h-5" checked />
              <label for="showSegments" class="text-sm text-gray-300">הצג גבולות מקטע (נרות לפרס)</label>
            </div>
          </div>
          <div class="flex items-center gap-4 mt-4">
            <label class="text-lg">כיוון</label>
            <button id="dirBtn" class="px-4 py-2 text-lg rounded-lg border border-gray-600 hover:bg-gray-700">ימין</button>
          </div>
          <div class="flex items-center gap-4 mt-4">
            <button id="playBtn" class="px-4 py-2 text-lg rounded-lg bg-green-500 text-white hover:bg-green-600">הפעל</button>
            <button id="stopBtn" class="px-4 py-2 text-lg rounded-lg bg-red-500 text-white hover:bg-red-600">עצור (E‑Stop)</button>
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-lg mb-2">תבנית לטבעת</label>
            <select id="ringPattern" class="w-full bg-gray-700 border-gray-600 rounded px-3 py-2 text-lg">
              <option value="rainbow">קשת מסתובבת</option>
              <option value="solid">צבע אחיד</option>
              <option value="chase">רדיפה</option>
              <option value="larson">לארסון</option>
              <option value="wipe">מחיקה סיבובית</option>
            <option value="fire">אש</option>
            </select>
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">פאלטה</label>
            <select id="palette" class="w-full bg-gray-700 border-gray-600 rounded px-3 py-2 text-lg">
              <option value="rainbow">Rainbow</option>
              <option value="warm">Warm</option>
              <option value="cool">Cool</option>
              <option value="bw">B/W</option>
            </select>
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">צבע בסיס</label>
            <input id="baseColor" type="color" value="#ff5500" class="w-full h-12 border-0 rounded cursor-pointer" />
          </div>
          <div class="flex items-center gap-3 mt-4">
            <input id="triangle" type="checkbox" class="w-6 h-6" />
            <label for="triangle" class="text-lg">משולש עצירה מאיר</label>
          </div>
        </div>

        <div class="space-y-4">
          <div>
            <label class="block text-lg mb-2">תבנית למטריצה</label>
            <select id="matrixPattern" class="w-full bg-gray-700 border-gray-600 rounded px-3 py-2 text-lg">
              <option value="noise">Noise</option>
              <option value="plasma">Plasma</option>
              <option value="life">Game of Life</option>
              <option value="scroll">גלילת טקסט</option>
              <option value="solid">צבע אחיד</option>
            <option value="starfield">Starfield</option>
            </select>
          </div>
          <div>
            <label class="block text-lg mt-4 mb-2">טקסט לגלילה</label>
            <input id="scrollText" class="w-full bg-gray-700 border-gray-600 rounded px-3 py-2 text-lg" value="GALGAL HAMAZAL" />
          </div>
          <div class="flex items-center gap-4 mt-4">
            <button id="randomizeBtn" class="px-4 py-2 text-lg rounded-lg border border-gray-600 hover:bg-gray-700">אקראי</button>
            <button id="resetLife" class="px-4 py-2 text-lg rounded-lg border border-gray-600 hover:bg-gray-700">איפוס Life</button>
          </div>
        </div>
        <div class="text-sm text-gray-500 mt-4">חיישני Hall: A/B מדומים ב‑0°/180°. סטטוס מעודכן מעל תרשים הטבעת.</div>
      </div>
    </div>

    <div class="bg-gray-800 rounded-xl shadow-lg p-6 lg:col-span-3">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div class="flex flex-wrap items-center gap-2">
          <span id="statusRun" class="status-chip" data-state="running">מצב: פועל</span>
          <span id="statusDir" class="status-chip">כיוון: ימין</span>
          <span id="statusSpeed" class="status-chip">מהירות: 60°/ש׳</span>
          <span id="statusBrightness" class="status-chip">בהירות: 80%</span>
          <span id="statusSegments" class="status-chip">נורות: 160</span>
          <span id="statusSegmentSize" class="status-chip">מקטע: 16</span>
        </div>
        <div class="text-sm text-gray-400 leading-relaxed">
          <p class="font-semibold mb-2">קיצורי מקלדת שימושיים</p>
          <ul class="list-disc list-inside space-y-1 md:space-y-0 md:list-none md:flex md:gap-6">
            <li><span class="text-yellow-400 font-semibold">רווח</span> – הפעלה / עצירה</li>
            <li><span class="text-yellow-400 font-semibold">חץ ימני/שמאלי</span> – שינוי מהירות</li>
            <li><span class="text-yellow-400 font-semibold">חץ מטה</span> – החלפת כיוון</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</main>

  <footer class="border-t bg-white">
    <div class="container mx-auto px-4 py-6 text-sm text-gray-500">© גלגל המזל · סימולטור</div>
  </footer>

  <script src="assets/site.js" defer></script>
  <script type="module" src="assets/main.js" defer></script>
</body>
</html>
